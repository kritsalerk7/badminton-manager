
/* v4: prettier toggle, headers, counts, aligned columns */

:root{ --name-min: 260px; }

/* Grid layout */
.member-row, .day-row{ display:block; }
.member-row .row-grid.left{ display:grid; grid-template-columns: minmax(var(--name-min), 1fr) auto; gap: 12px; align-items:center; }
.day-row .row-grid.right{ display:grid; grid-template-columns: minmax(var(--name-min), 1fr) 120px auto; gap: 12px; align-items:center; }
.list-header{ background:#f8fafc; position: sticky; top: 0; z-index: 5; }
.list-header .row-grid.right{ grid-template-columns: minmax(var(--name-min), 1fr) 120px auto; }

.name-col{ min-width:0; }
.actions-col, .toggle-col{ white-space:nowrap; }

/* Toggle pill */
.toggle-btn{ background: transparent; border: none; padding: 0; cursor: pointer; }
.toggle-btn .tgl-track{
  width: 52px; height: 28px; border-radius: 999px; background: #e5e7eb; position: relative;
  box-shadow: inset 0 0 0 2px #e5e7eb; transition: background .2s, box-shadow .2s;
  display:inline-block;
}
.toggle-btn .tgl-thumb{
  width: 22px; height: 22px; border-radius: 50%; background: #fff; position:absolute; top:3px; left:3px;
  transition: transform .2s, background .2s, box-shadow .2s; box-shadow: 0 1px 3px rgba(0,0,0,.2);
}
.toggle-btn[data-state="on"] .tgl-track{ background: #19875430; box-shadow: inset 0 0 0 2px #198754; }
.toggle-btn[data-state="on"] .tgl-thumb{ transform: translateX(24px); background: #198754; }

/* Level badges */
.lvl-badge{ display:inline-block; padding:.28rem .65rem; border-radius:999px; font-weight:700; font-size:1rem; line-height:1; }
.lvl-badge.lv-1{ background:#E2E8F0; color:#0F172A; }
.lvl-badge.lv-2{ background:#CFFAFE; color:#0C4A6E; }
.lvl-badge.lv-3{ background:#DBEAFE; color:#1E3A8A; }
.lvl-badge.lv-4{ background:#FEF3C7; color:#92400E; }
.lvl-badge.lv-5{ background:#DCFCE7; color:#065F46; }

/* Toasts */
#appToasts{ position:fixed; right:16px; bottom:16px; z-index:1080; display:flex; flex-direction:column; gap:8px; pointer-events:none; }
.toast-msg{ pointer-events:auto; border-radius:.5rem; padding:.6rem .8rem; color:#fff; opacity:0; transform:translateY(10px); transition:opacity .25s, transform .25s; box-shadow:0 6px 18px rgba(0,0,0,.15); }
.toast-msg.show{ opacity:1; transform:translateY(0); }
.toast-msg.info{ background:#0D6EFD; } .toast-msg.success{ background:#198754; } .toast-msg.warning{ background:#FD7E14; } .toast-msg.error{ background:#DC3545; }

/* Empty state */
.empty-state{ display:flex; align-items:center; gap:.5rem; }
.empty-state i{ font-size:1.1rem; opacity:.7; }

/* DnD visual */
.dragging{ opacity:.7; }
.dropping{ outline:2px dashed #0D6EFD; }
.flash-add { outline:2px solid #198754; background: rgba(25,135,84,.12); }
.flash-cancel { outline:2px solid #dc3545; background: rgba(220,53,69,.12); }
.flash-box-add { box-shadow: inset 0 0 0 2px #198754; background: rgba(25,135,84,.06); }
.flash-box-cancel { box-shadow: inset 0 0 0 2px #dc3545; background: rgba(220,53,69,.06); }

/* Profile modal prettify (from v3 kept) */
#profileModal .modal-body{ max-height: 65vh; overflow:auto; }
#profileModal .stat-card{ background:#0d6efd0d; border:1px solid #e5e7eb; border-radius:.75rem; padding:.75rem .9rem; }
#profileModal .stat-card .label{ font-size:.85rem; color:#64748b; }
#profileModal .stat-card .value{ font-size:1.5rem; font-weight:800; }
#profileModal .modal-title{ display:flex; align-items:center; gap:.5rem; }
#profileModal .modal-header{ border-bottom: none; }
#profileModal .modal-footer{ border-top: none; }

/* Responsive */
@media (max-width: 576px){
  :root{ --name-min: 180px; }
  .list-group-item{ padding:.85rem 1rem; }
  #appToasts{ right:12px; bottom:12px; }
}

/* Backdrop safety */
body:not(.modal-open) .modal-backdrop{ display:none !important; opacity:0 !important; }
